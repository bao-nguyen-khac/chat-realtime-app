<div class="modal fade" id="modal-chat-add-mem" tabindex="-1" role="dialog" aria-labelledby="chat-new-memberModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content modal-header-colored shadow-lg border-0">
            <div class="modal-header">
                <h5 class="modal-title text-white font-size-16" id="chat-new-memberModalLabel">
                    Add New Member</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body p-4">
                <div class="card border">
                    <div class="card-body p-2">
                        <div style="max-height: 150px;" class="contacts-add-new-mem">

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-link" data-bs-dismiss="modal">Close</button>
                    <button class="btn btn-primary" type="submit">Confirm</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const btnAddNewMem = document.querySelector('.btn-chat-add-member');
    var listMembers = [];
    var listMemberSelect = document.querySelectorAll('.passMembersId')
    listMemberSelect.forEach(memId => {
        listMembers.push(memId.value)
    });
    btnAddNewMem.addEventListener('click', () => {
        $.ajax({
            url: "/message/get-all-contact-sort",
            method: "GET",
            success: function (data) {
                let output = '<ul class="list-unstyled contact-list">';
                let arrChar = [];
                data.forEach(e => {
                    if (!arrChar.some(a => a === e.fullname[0])) {
                        arrChar.push(e.fullname[0]);
                        output += `
                            <div class="contact-list-title">
                                ${e.fullname[0]}
                            </div>
                        `;
                    }
                    if (listMembers.some(a => a == e.id)) {
                        output += `
                            <li>
                                <div class="form-check">
                                    <input type="checkbox" value="${e.id}" class="form-check-input" checked disabled>
                                    <label class="form-check-label">${e.fullname} (joined)</label>
                                </div>
                            </li>
                        `;
                    }else{
                        output += `
                            <li>
                                <div class="form-check">
                                    <input type="checkbox" id="memberCheck${e.id}" name="abc" value="${e.id}" class="form-check-input">
                                    <label for="memberCheck${e.id}" class="form-check-label">${e.fullname}</label>
                                </div>
                            </li>
                        `;
                    }
                    
                })
                output += '</ul>';
                document.querySelector('.contacts-add-new-mem').innerHTML = output;
            }
        })
    })
</script>